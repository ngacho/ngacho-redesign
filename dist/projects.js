/*! For license information please see projects.js.LICENSE.txt */
(()=>{"use strict";var e={"./app/controller/projects-list-controller.js":(e,t,s)=>{s.r(t),s.d(t,{ProjectListController:()=>r});class r{constructor(e,t){this.model=e,this.view=t,this.init()}init(){this.model.getProjects().then((e=>{this.onProjectListChanged(e)})).catch((e=>{console.error("error "+e)}))}onProjectListChanged=e=>{this.view.displayProjects(e)}}},"./app/model/base-models/base-model.js":(e,t,s)=>{s.r(t),s.d(t,{BaseModel:()=>r});class r{constructor(e){this.baseUrl=e}async getList(){return new Promise(((e,t)=>{fetch(this.baseUrl,{credentials:"include"}).then((s=>{Promise.all([s.json(),s.status]).then((([s,r])=>{200===r?e(s):(console.log(err),t(`Failed with response ${r}`))})).catch((e=>{console.log(e),t(`Failed response: ${e}`)}))})).catch((e=>{console.log(e),t("Failed to fetch")}))}))}async getListByTag(e){return new Promise(((t,s)=>{fetch(`${this.baseUrl}/tags/${encodeURIComponent(e)}`).then((e=>{Promise.all([e.json(),e.status]).then((([e,r])=>{200===r?t(e):s(`Failed with response ${r}`)})).catch((e=>{s(`Failed response: ${e}`)}))})).catch((e=>s("Failed to fetch")))}))}async getListItemById(e,t){return new Promise(((s,r)=>{fetch(`${this.baseUrl}/${e}/${t}`,{credentials:"include"}).then((e=>{Promise.all([e.json(),e.status]).then((([e,t])=>{200===t?s(e):r(`Failed with response ${t}`)})).catch((e=>{r("Failed response")}))})).catch((()=>r("Failed to fetch id")))}))}async createItem(e){const t={doc:e},s={method:"POST",headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(t)};return new Promise(((e,t)=>{fetch(this.baseUrl,s).then((s=>{Promise.all([s.text(),s.status]).then((([s,r])=>{200===r?e("Success"):t(`Failed with response ${r}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),t("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),t("Failed response.")}))}))}async createFileItem(e,t){const s=new FormData;s.append("file",e),s.append("doc",JSON.stringify(t));const r={method:"POST",credentials:"include",body:s};return new Promise(((e,t)=>{fetch(this.baseUrl,r).then((s=>{Promise.all([s.text(),s.status]).then((([s,r])=>{200===r?e("Success"):t(`Failed with response ${r}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),t("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),t("Failed response.")}))}))}async updateFileItemObject(e,t){const s=new FormData;s.append("file",e),s.append("doc",JSON.stringify(t));const r={method:"PUT",body:s,credentials:"include"};return new Promise(((e,s)=>{fetch(`${this.baseUrl}/${t.id}`,r).then((t=>{Promise.all([t.text(),t.status]).then((([t,r])=>{200===r?e("Success"):s(`Failed with response ${r}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),s("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),s("Failed response.")}))}))}async updateItem(e){const t={doc:e},s={method:"PUT",headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(t)};return new Promise(((t,r)=>{fetch(`${this.baseUrl}/${e.id}`,s).then((e=>{Promise.all([e.text(),e.status]).then((([e,s])=>{200===s?t("Success"):(console.error(`ERROR LEVEL 2: ${e}`),r(`Failed with response ${s}`))})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),r("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),r("Failed response.")}))}))}async updateItemStatus(e){return new Promise(((t,s)=>{fetch(`${this.baseUrl}/set-active/${e}`,{method:"PUT",credentials:"include"}).then((e=>{Promise.all([e.json(),e.status]).then((([e,r])=>{200===r?t("Success"):s(`Failed with response ${r}`)})).catch((e=>{s("Failed response")}))})).catch((e=>{s("Failed")}))}))}async deleteItem(e){return new Promise(((t,s)=>{fetch(`${this.baseUrl}/${e}`,{method:"DELETE",credentials:"include"}).then((e=>{Promise.all([e.text(),e.status]).then((([e,r])=>{200===r?t("Success"):s(`Failed with response ${r}`)})).catch((e=>{s("Failed response")}))})).catch((e=>{s("Failed to delete text")}))}))}}},"./app/model/base-models/projects-model.js":(e,t,s)=>{s.r(t),s.d(t,{ProjectBaseModel:()=>o});var r=s("./app/model/base-models/base-model.js");class o{constructor(){this.baseModel=new r.BaseModel("https://api.ngacho.com/database/projects")}async fetchProjects(){return this.baseModel.getList()}async fetchProjectById(e,t=!1){return this.baseModel.getListItemById(e,t)}async deleteProject(e){return this.baseModel.deleteItem(e)}async updateProjectWithFile(e,t){return this.baseModel.updateFileItemObject(e,t)}async updateProject(e){return this.baseModel.updateItem(e)}async publishProject(e,t){return this.baseModel.createFileItem(e,t)}}},"./app/model/project-list-model.js":(e,t,s)=>{s.r(t),s.d(t,{ProjectListModel:()=>o});var r=s("./app/model/base-models/projects-model.js");class o extends r.ProjectBaseModel{constructor(){super()}async getProjects(){return await this.fetchProjects()}}},"./app/view/projects/projects-list-view.js":(e,t,s)=>{s.r(t),s.d(t,{ProjectListView:()=>r});class r{constructor(){this.projects_carousel=document.querySelector(".projects-carousel"),this.right_click_button=document.querySelector(".right-control"),this.left_click_button=document.querySelector(".left-control"),this.right_click_button.addEventListener("click",(()=>{this.scrollTowardsRight()})),this.left_click_button.addEventListener("click",(()=>{this.scrollTowardsLeft()})),this.scrollAmount=0}displayProjects(e){for(const p of e){const e=p.id,u=e.substring(0,e.length-5),m=p.publicUrl,j=p.projectLanguages,y=p.projectExtraInfoUrl;var t=document.createElement("div");t.className="project-card animate-entry";var s=document.createElement("figure"),r=document.createElement("img");r.src=m,r.alt=`photo of ${u}`,s.appendChild(r);var o=document.createElement("section");o.className="project-details";var c=document.createElement("div");c.className="min-details";var a=document.createElement("h1"),l=document.createTextNode(u);a.appendChild(l);var n=document.createElement("span"),i=document.createTextNode(j);n.appendChild(i),a.appendChild(n),c.appendChild(a);var d=document.createElement("a");d.className="btn";var h=document.createTextNode("Learn More");d.href=y,d.target="_blank",d.rel="noopener noreferrer",d.appendChild(h),o.appendChild(c),o.appendChild(d),t.appendChild(s),t.appendChild(o),this.projects_carousel.appendChild(t)}}scrollTowardsLeft(){var e=document.querySelector(".project-card"),t=e.currentStyle||window.getComputedStyle(e),s=e.clientWidth+parseFloat(t.marginRight)+parseFloat(t.marginLeft);this.projects_carousel.scrollTo({top:0,left:this.scrollAmount-=s,behavior:"smooth"}),this.scrollAmount<0&&(scrollAmount=0)}scrollTowardsRight(){var e=document.querySelector(".project-card"),t=e.currentStyle||window.getComputedStyle(e),s=e.clientWidth+parseFloat(t.marginRight)+parseFloat(t.marginLeft);this.scrollAmount<=this.projects_carousel.scrollWidth-this.projects_carousel.clientWidth&&this.projects_carousel.scrollTo({top:0,left:this.scrollAmount+=s,behavior:"smooth"})}}}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,s),c.exports}s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{s.r(r);var e=s("./app/view/projects/projects-list-view.js"),t=s("./app/controller/projects-list-controller.js"),o=s("./app/model/project-list-model.js");new t.ProjectListController(new o.ProjectListModel,new e.ProjectListView)})()})();
//# sourceMappingURL=projects.js.map