/*! For license information please see blogPost.js.LICENSE.txt */
(()=>{"use strict";var e={"./app/controller/blog-post-controller.js":(e,t,o)=>{o.r(t),o.d(t,{BlogPostController:()=>s});class s{constructor(e,t){this.model=e,this.view=t,this.blogId="",this.init()}init(){let e=decodeURI(location.search);this.blogId=e.slice(1),this.blogId&&this.fetchBlog(this.blogId)}fetchBlog(e){this.model.fetchBlogFromDb(e).then((e=>{this.viewSetUpBlog(e)})).catch((e=>console.log(e)))}viewSetUpBlog(e){this.view.setUpBlog(e)}}},"./app/model/base-models/base-model.js":(e,t,o)=>{o.r(t),o.d(t,{BaseModel:()=>s});class s{constructor(e){this.baseUrl=e}async getList(){return new Promise(((e,t)=>{fetch(this.baseUrl,{credentials:"include"}).then((o=>{Promise.all([o.json(),o.status]).then((([o,s])=>{200===s?e(o):(console.log(err),t(`Failed with response ${s}`))})).catch((e=>{console.log(e),t(`Failed response: ${e}`)}))})).catch((e=>{console.log(e),t("Failed to fetch")}))}))}async getListByTag(e){return new Promise(((t,o)=>{fetch(`${this.baseUrl}/tags/${encodeURIComponent(e)}`).then((e=>{Promise.all([e.json(),e.status]).then((([e,s])=>{200===s?t(e):o(`Failed with response ${s}`)})).catch((e=>{o(`Failed response: ${e}`)}))})).catch((e=>o("Failed to fetch")))}))}async getListItemById(e,t){return new Promise(((o,s)=>{fetch(`${this.baseUrl}/${e}/${t}`,{credentials:"include"}).then((e=>{Promise.all([e.json(),e.status]).then((([e,t])=>{200===t?o(e):s(`Failed with response ${t}`)})).catch((e=>{s("Failed response")}))})).catch((()=>s("Failed to fetch id")))}))}async createItem(e){const t={doc:e},o={method:"POST",headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(t)};return new Promise(((e,t)=>{fetch(this.baseUrl,o).then((o=>{Promise.all([o.text(),o.status]).then((([o,s])=>{200===s?e("Success"):t(`Failed with response ${s}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),t("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),t("Failed response.")}))}))}async createFileItem(e,t){const o=new FormData;o.append("file",e),o.append("doc",JSON.stringify(t));const s={method:"POST",credentials:"include",body:o};return new Promise(((e,t)=>{fetch(this.baseUrl,s).then((o=>{Promise.all([o.text(),o.status]).then((([o,s])=>{200===s?e("Success"):t(`Failed with response ${s}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),t("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),t("Failed response.")}))}))}async updateFileItemObject(e,t){const o=new FormData;o.append("file",e),o.append("doc",JSON.stringify(t));const s={method:"PUT",body:o,credentials:"include"};return new Promise(((e,o)=>{fetch(`${this.baseUrl}/${t.id}`,s).then((t=>{Promise.all([t.text(),t.status]).then((([t,s])=>{200===s?e("Success"):o(`Failed with response ${s}`)})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),o("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),o("Failed response.")}))}))}async updateItem(e){const t={doc:e},o={method:"PUT",headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(t)};return new Promise(((t,s)=>{fetch(`${this.baseUrl}/${e.id}`,o).then((e=>{Promise.all([e.text(),e.status]).then((([e,o])=>{200===o?t("Success"):(console.error(`ERROR LEVEL 2: ${e}`),s(`Failed with response ${o}`))})).catch((e=>{console.error(`ERROR LEVEL 2: ${e}`),s("Failed response")}))})).catch((e=>{console.error(`ERROR LEVEL 1: ${e}`),s("Failed response.")}))}))}async updateItemStatus(e){return new Promise(((t,o)=>{fetch(`${this.baseUrl}/set-active/${e}`,{method:"PUT",credentials:"include"}).then((e=>{Promise.all([e.json(),e.status]).then((([e,s])=>{200===s?t("Success"):o(`Failed with response ${s}`)})).catch((e=>{o("Failed response")}))})).catch((e=>{o("Failed")}))}))}async deleteItem(e){return new Promise(((t,o)=>{fetch(`${this.baseUrl}/${e}`,{method:"DELETE",credentials:"include"}).then((e=>{Promise.all([e.text(),e.status]).then((([e,s])=>{200===s?t("Success"):o(`Failed with response ${s}`)})).catch((e=>{o("Failed response")}))})).catch((e=>{o("Failed to delete text")}))}))}}},"./app/model/base-models/blog-model.js":(e,t,o)=>{o.r(t),o.d(t,{BlogModel:()=>l});var s=o("./app/model/base-models/base-model.js");class l{constructor(){this.baseModel=new s.BaseModel("https://api.ngacho.com/database/blogs")}async addBlog(e){return this.baseModel.createItem(e)}async editBlog(e){return this.baseModel.updateItem(e)}async getBlogs(){return this.baseModel.getList()}async getBlog(e,t=!1){return this.baseModel.getListItemById(e,t)}async deleteBlogById(e){return this.baseModel.deleteItem(e)}async getBlogsByTags(e){return this.baseModel.getListByTag(e)}}},"./app/model/blog-post-model.js":(e,t,o)=>{o.r(t),o.d(t,{BlogPostModel:()=>l});var s=o("./app/model/base-models/blog-model.js");class l extends s.BlogModel{constructor(){super()}async fetchBlogFromDb(e){return await this.getBlog(e,!0)}}},"./app/view/blog/blog-post-view.js":(e,t,o)=>{o.r(t),o.d(t,{BlogPostView:()=>s});class s{constructor(){this.blog_heading_container=document.querySelector(".blog-heading-wrapper"),this.blog_content_container=document.querySelector(".blog-content")}setUpBlog(e){var t=document.createElement("h1");t.className="blog-heading";var o=document.createTextNode(e.title);document.title=e.title,t.appendChild(o),this.blog_heading_container.appendChild(t);var s=document.createElement("time"),l=document.createTextNode(e.publishedAt);s.appendChild(l),this.blog_content_container.appendChild(s);var n=e.descript;if(n){var r=document.createElement("blockquote");r.className="post-description";var a=document.createTextNode(n);r.appendChild(a),this.blog_content_container.appendChild(r)}var c=document.createElement("article");c.className="blog-post",c.innerHTML=e.html,this.blog_content_container.appendChild(c)}}}},t={};function o(s){var l=t[s];if(void 0!==l)return l.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{o.r(s);var e=o("./app/view/blog/blog-post-view.js"),t=o("./app/model/blog-post-model.js");new(o("./app/controller/blog-post-controller.js").BlogPostController)(new t.BlogPostModel,new e.BlogPostView)})()})();
//# sourceMappingURL=blogPost.js.map